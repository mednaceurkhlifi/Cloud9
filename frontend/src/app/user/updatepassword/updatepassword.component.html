<div class="edit-profile-container p-p-4">
    <p-card header="Change Password" [style]="{'box-shadow': '0 4px 20px rgba(0, 0, 0, 0.08)', 'border-radius': '12px'}">
      <form [formGroup]="editForm" (ngSubmit)="onSubmit()" class="p-fluid p-mt-4">
        <div class="p-grid p-formgrid">

          <!-- Old Password -->
          <div class="p-field p-col-12 p-mb-4">
            <label for="oldpassword" class="block text-600 text-sm font-medium mb-2">Current Password</label>
            <span class="p-input-icon-left w-full">
              <i class="pi pi-lock text-primary"></i>
              <input id="oldpassword" type="password" pInputText formControlName="oldpassword"
                class="custom-input w-full"
                placeholder="Enter your current password" />
            </span>
            <small *ngIf="editForm.get('oldpassword')?.invalid && editForm.get('oldpassword')?.touched" 
                   class="p-error block mt-1 text-sm">Please enter your current password</small>
          </div>

          <!-- New Password -->
          <div class="p-field p-col-12 p-mb-4">
            <label for="newpassword" class="block text-600 text-sm font-medium mb-2">New Password</label>
            <span class="p-input-icon-left w-full">
              <i class="pi pi-lock text-primary"></i>
              <input id="newpassword" type="password" pInputText formControlName="newpassword"
                class="custom-input w-full"
                placeholder="Create a new password (min. 6 characters with numbers)" />
            </span>
            <small *ngIf="editForm.get('newpassword')?.invalid && editForm.get('newpassword')?.touched" 
                   class="p-error block mt-1 text-sm">
              <i class="pi pi-exclamation-circle mr-1"></i> Password must be at least 6 characters and contain numbers
            </small>
            <small *ngIf="editForm.get('newpassword')?.valid" class="block mt-1 text-sm text-green-500">
              <i class="pi pi-check-circle mr-1"></i> Password meets requirements
            </small>
          </div>

          <!-- Retype Password -->
          <div class="p-field p-col-12 p-mb-4">
            <label for="retypepassword" class="block text-600 text-sm font-medium mb-2">Confirm New Password</label>
            <span class="p-input-icon-left w-full">
              <i class="pi pi-lock text-primary"></i>
              <input id="retypepassword" type="password" pInputText formControlName="retypepassword"
                class="custom-input w-full"
                placeholder="Re-enter your new password" />
            </span>
            <small *ngIf="editForm.hasError('passwordMismatch') && editForm.get('retypepassword')?.touched" 
                   class="p-error block mt-1 text-sm">
              <i class="pi pi-exclamation-circle mr-1"></i> Passwords do not match
            </small>
            <small *ngIf="!editForm.hasError('passwordMismatch') && editForm.get('retypepassword')?.valid" 
                   class="block mt-1 text-sm text-green-500">
              <i class="pi pi-check-circle mr-1"></i> Passwords match
            </small>
          </div>

          <div class="p-col-12 p-d-flex p-jc-end p-mt-5 p-gap-3">
            <button pButton type="button" label="Cancel" icon="pi pi-times" 
                    class="p-button-outlined p-button-secondary h-3rem"
                    [style]="{'min-width': '8rem'}" (click)="onCancel()"></button>
            <button pButton type="submit" label="{{isSubmitting ? 'Updating...' : 'Update Password'}}" 
                    icon="{{isSubmitting ? 'pi pi-spinner pi-spin' : 'pi pi-check'}}" 
                    class="p-button-primary h-3rem" [style]="{'min-width': '10rem'}"
                    [disabled]="!editForm.valid || isSubmitting"></button>
          </div>

        </div>
      </form>
    </p-card>
</div>
